(function () {    var MovieClip=yhge.renderer.canvas.swf.MovieClip;    var Monster=yhge.core.Class(MovieClip,{        classname:"Monster",        initialize:function(){            Monster._super_.initialize.apply(this,arguments);            this._radius=8;            this._solid=true;            this.speed=1.5;            this.d=8;            this.range=4;            this.ang=random(360);        },        update:function (delta) {            //位置移动            if (this.d > 0){                --this.d;                this.ang+=random(this.range);                if (this.ang > 360){                    this.ang = this.ang - 360;                }            }else{                ++this.d;                this.ang -= random(this.range);                if (this.ang < 0){                    this.ang = this.ang + 360;                }            }            if (!this.d){                this.d = 10 +random(40);                if (random(100) > 50){                    this.d = -this.d;                }            }            var rang = rad(this.ang);            var xs = Math.cos(rang) * this.speed;            var ys = Math.sin(rang) * this.speed;                        this._position.x+=xs;            this._position.y+=ys;            this._rotation=this.ang-90;            this.ceklimits();            this._dirty=yhge.renderer.DIRTY_ALL;        },        ceklimits : function (){            var p = this._position;            if (p.x < 75 || p.x > 425 || p.y < 75 || p.y > 425){                var dx = p.x - 250;                var dy = p.y - 250;//r.cy;                if (dx * dx + dy * dy > 62500){                    var rang = Math.atan2(dy, dx);                    p.x = p.x - Math.cos(rang) * 500;// r.scrad;                    p.y = p.y - Math.sin(rang) * 500;//r.scrad;                    return true;                }            }        },        calcDirection:function (to) {            var dirX=0,dirY=0;            //dirX=to.x>this._position.x?1:to.x<this._position.x?-1:0;            //dirY=to.y>this._position.y?1:to.y<this._position.y?-1:0;            var degree=(Math.random()*360)*Math.PI/180;            dirX=Math.cos(degree);            dirY=Math.sin(degree);            return {x:dirX,y:dirY};        },        setTarget:function(target) {            this._target = target;            return this;        },        getTarget:function() {            return this._target;        },        setCategory:function(category) {            this._category = category;            var res=game.resources[category];            this.setFrames(res.getFrames());            this.setChildMovieClips(res.getChildMovieClips());            return this;        },        getCategory:function() {            return this._category;        }                    });    YHBug.Monster=Monster;})();